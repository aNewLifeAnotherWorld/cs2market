<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üì¶ CS2 –ö–µ–π—Å—ã</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      margin: 0;
      padding: 0;
      color: #e0e0e0;
      overflow-x: hidden;
      background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAJElEQVQYV2N89+7dfwYsQEhIiBEkzJgxY8YgII5EIECIAQAN3QtO9qL/PgAAAABJRU5ErkJggg==');
      background-repeat: repeat;
    }
    .container {
      max-width: 100%;
      padding: 20px;
      box-sizing: border-box;
    }
    .header {
      background-color: rgba(42, 42, 62, 0.9);
      padding: 15px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      margin-bottom: 20px;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 15px;
    }
    .header button, .header a {
      padding: 12px 30px;
      border: none;
      border-radius: 10px;
      font-size: 18px;
      font-weight: 600;
      cursor: pointer;
      text-decoration: none;
      color: white;
      transition: transform 0.2s, box-shadow 0.2s;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
    }
    .header button:hover, .header a:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.5);
    }
    .update-button {
      background-color: #ff4c4c;
    }
    .update-button:hover {
      background-color: #e63939;
    }
    .calculator-button {
      background-color: #00cc88;
    }
    .calculator-button:hover {
      background-color: #00b378;
    }
    .case {
      display: flex;
      align-items: center;
      background-color: rgba(42, 42, 62, 0.9);
      margin: 10px 0;
      padding: 15px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      transition: transform 0.2s;
    }
    .case:hover {
      transform: translateY(-2px);
    }
    .case img {
      width: 60px;
      height: 60px;
      object-fit: cover;
      border-radius: 8px;
      margin-right: 15px;
    }
    .case-info {
      flex: 1;
    }
    .case-info h3 {
      margin: 0;
      font-size: 16px;
      color: #e0e0e0;
    }
    .case-info p {
      margin: 5px 0 0;
      color: #a0a0a0;
      font-size: 14px;
    }
    .price-change {
      width: 20px;
      height: 20px;
      margin-left: 10px;
    }
    @media (max-width: 600px) {
      .container {
        padding: 10px;
      }
      .header {
        flex-direction: row;
        justify-content: center;
        gap: 10px;
      }
      .header button, .header a {
        padding: 10px 20px;
        font-size: 16px;
      }
      .case {
        margin: 5px 0;
        padding: 10px;
      }
      .case img {
        width: 50px;
        height: 50px;
      }
      .case-info h3 {
        font-size: 14px;
      }
      .case-info p {
        font-size: 12px;
      }
      .price-change {
        width: 16px;
        height: 16px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <button class="update-button" onclick="updatePrices()">–û–±–Ω–æ–≤–∏—Ç—å —Ü–µ–Ω—ã</button>
      <a href="https://docs.google.com/spreadsheets/d/1TdlbMQDbH9LtcM2Ca1lyP4byxrMoht-WKUNNT8Y4pw0/edit?gid=1972840686#gid=1972840686" class="calculator-button" target="_blank">–î–æ—Ö–æ–¥—ã</a>
    </div>
    <div id="cases">
      <!-- –°–ø–∏—Å–æ–∫ –∫–µ–π—Å–æ–≤ -->
    </div>
  </div>

  <script>
    // –ú–∞–ø–ø–∏–Ω–≥ —Ä—É—Å—Å–∫–∏—Ö –Ω–∞–∑–≤–∞–Ω–∏–π –Ω–∞ market_hash_name
    const caseNameMapping = {
      "–ö–µ–π—Å ¬´–õ–∏—Ö–æ—Ä–∞–¥–∫–∞¬ª": "Danger Zone Case",
      "–ö–µ–π—Å ¬´–ì—Ä—ë–∑—ã –∏ –∫–æ—à–º–∞—Ä—ã¬ª": "Dreams & Nightmares Case",
      "–ö–µ–π—Å ¬´–ö–∏–ª–æ–≤–∞—Ç—Ç¬ª": "Kilowatt Case",
      "–ö–µ–π—Å ¬´–†–µ–≤–æ–ª—é—Ü–∏—è¬ª": "Revolution Case",
      "–ö–µ–π—Å ¬´–†–∞–∑–ª–æ–º¬ª": "Fracture Case",
      "–ì—Ä–µ–º—É—á–∏–π –∫–µ–π—Å": "Snakebite Case",
      "–ö–µ–π—Å ¬´–ó–∞–ø—Ä–µ—Ç–Ω–∞—è –∑–æ–Ω–∞¬ª": "Prisma Case",
      "–ü–µ—Ä—á–∞—Ç–æ—á–Ω—ã–π –∫–µ–π—Å": "Glove Case",
      "–û—Ä—É–∂–µ–π–Ω—ã–π –∫–µ–π—Å –æ–ø–µ—Ä–∞—Ü–∏–∏ ¬´–ü—Ä–æ—Ä—ã–≤¬ª": "Operation Breakout Weapon Case",
      "–ö–µ–π—Å ¬´–°–ø–µ–∫—Ç—Ä 2¬ª": "Spectrum 2 Case",
      "–ö–µ–π—Å ¬´–°–ø–µ–∫—Ç—Ä¬ª": "Spectrum Case",
      "–•—Ä–æ–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–µ–π—Å #2": "Chroma 2 Case",
      "–†–µ–≤–æ–ª—å–≤–µ—Ä–Ω—ã–π –∫–µ–π—Å": "Revolver Case",
      "–ö–µ–π—Å ¬´–†–µ—à–∞—é—â–∏–π –º–æ–º–µ–Ω—Ç¬ª": "Clutch Case",
      "–•—Ä–æ–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–µ–π—Å #3": "Chroma 3 Case",
      "–ì–∞–º–º–∞-–∫–µ–π—Å #2": "Gamma 2 Case",
      "–ö–µ–π—Å ¬´–ü—Ä–∏–∑–º–∞ 2¬ª": "Prisma 2 Case",
      "–ö–µ–π—Å ¬´–ó–º–µ–∏–Ω—ã–π —É–∫—É—Å¬ª": "Snakebite Case",
      "–ì–∞–ª–µ—Ä–µ–π–Ω—ã–π –∫–µ–π—Å": "CS20 Case",
      "–ö–µ–π—Å CS20": "CS20 Case",
      "–ö–µ–π—Å –æ–ø–µ—Ä–∞—Ü–∏–∏ ¬´–î–∏–∫–æ–µ –ø–ª–∞–º—è¬ª": "Operation Wildfire Case",
      "–ö–µ–π—Å ¬´–§–∞–ª—å—à–∏–æ–Ω¬ª": "Falchion Case",
      "–û—Ä—É–∂–µ–π–Ω—ã–π –∫–µ–π—Å –æ–ø–µ—Ä–∞—Ü–∏–∏ ¬´–§–µ–Ω–∏–∫—Å¬ª": "Operation Phoenix Weapon Case",
      "–ö–µ–π—Å ¬´–ü—Ä–∏–∑–º–∞¬ª": "Prisma Case",
      "–ì–∞–º–º–∞ –∫–µ–π—Å": "Gamma Case",
      "–ö–µ–π—Å ¬´–ì–æ—Ä–∏–∑–æ–Ω—Ç¬ª": "Horizon Case",
      "–•—Ä–æ–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ä—É–∂–µ–π–Ω—ã–π –∫–µ–π—Å": "Chroma Case",
      "–û—Ö–æ—Ç–Ω–∏—á–∏–π –æ—Ä—É–∂–µ–π–Ω—ã–π –∫–µ–π—Å": "Huntsman Weapon Case",
      "–¢—ë–º–Ω—ã–π –∫–µ–π—Å": "Shadow Case",
      "–ö–µ–π—Å –æ–ø–µ—Ä–∞—Ü–∏–∏ ¬´–ë—Ä–∞–≤–æ¬ª": "Operation Bravo Case",
      "–ö–µ–π—Å –æ–ø–µ—Ä–∞—Ü–∏–∏ ¬´–°–ª–æ–º–∞–Ω–Ω—ã–π –∫–ª—ã–∫¬ª": "Operation Broken Fang Case",
      "–û—Ä—É–∂–µ–π–Ω—ã–π –∫–µ–π—Å –æ–ø–µ—Ä–∞—Ü–∏–∏ ¬´–ê–≤–∞–Ω–≥–∞—Ä–¥¬ª": "Operation Vanguard Weapon Case",
      "–ö–µ–π—Å –æ–ø–µ—Ä–∞—Ü–∏–∏ ¬´–ì–∏–¥—Ä–∞¬ª": "Operation Hydra Case"
    };

    // –î–∞–Ω–Ω—ã–µ –æ –∫–µ–π—Å–∞—Ö
    let caseData = [
      { name: "–ö–µ–π—Å ¬´–õ–∏—Ö–æ—Ä–∞–¥–∫–∞¬ª", price: 86, prevPrice: 86, image: "img/lihoradka.png" },
      { name: "–ö–µ–π—Å ¬´–ì—Ä—ë–∑—ã –∏ –∫–æ—à–º–∞—Ä—ã¬ª", price: 175.08, prevPrice: 175.08, image: "img/grezy_i_kosmary.png" },
      { name: "–ö–µ–π—Å ¬´–ö–∏–ª–æ–≤–∞—Ç—Ç¬ª", price: 52, prevPrice: 52, image: "img/kilovatt.png" },
      { name: "–ö–µ–π—Å ¬´–†–µ–≤–æ–ª—é—Ü–∏—è¬ª", price: 48.77, prevPrice: 48.77, image: "img/revolyuciya.png" },
      { name: "–ö–µ–π—Å ¬´–†–∞–∑–ª–æ–º¬ª", price: 29.7, prevPrice: 29.7, image: "img/razlom.png" },
      { name: "–ì—Ä–µ–º—É—á–∏–π –∫–µ–π—Å", price: 24.15, prevPrice: 24.15, image: "img/gremuchiy.png" },
      { name: "–ö–µ–π—Å ¬´–ó–∞–ø—Ä–µ—Ç–Ω–∞—è –∑–æ–Ω–∞¬ª", price: 129.67, prevPrice: 129.67, image: "img/zapretnaya_zona.png" },
      { name: "–ü–µ—Ä—á–∞—Ç–æ—á–Ω—ã–π –∫–µ–π—Å", price: 1348, prevPrice: 1348, image: "img/perchatka.png" },
      { name: "–û—Ä—É–∂–µ–π–Ω—ã–π –∫–µ–π—Å –æ–ø–µ—Ä–∞—Ü–∏–∏ ¬´–ü—Ä–æ—Ä—ã–≤¬ª", price: 920, prevPrice: 920, image: "img/proryv.png" },
      { name: "–ö–µ–π—Å ¬´–°–ø–µ–∫—Ç—Ä 2¬ª", price: 360.66, prevPrice: 360.66, image: "img/spectrum_2.png" },
      { name: "–ö–µ–π—Å ¬´–°–ø–µ–∫—Ç—Ä¬ª", price: 496.94, prevPrice: 496.94, image: "img/spectrum.png" },
      { name: "–•—Ä–æ–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–µ–π—Å #2", price: 411.86, prevPrice: 411.86, image: "img/chrome_case_2.png" },
      { name: "–†–µ–≤–æ–ª—å–≤–µ—Ä–Ω—ã–π –∫–µ–π—Å", price: 328.16, prevPrice: 328.16, image: "img/revolver.png" },
      { name: "–ö–µ–π—Å ¬´–†–µ—à–∞—é—â–∏–π –º–æ–º–µ–Ω—Ç¬ª", price: 73.32, prevPrice: 73.32, image: "img/reshayuschiy_moment.png" },
      { name: "–•—Ä–æ–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–µ–π—Å #3", price: 407, prevPrice: 407, image: "img/chrome_case_3.png" },
      { name: "–ì–∞–º–º–∞-–∫–µ–π—Å #2", price: 437.8, prevPrice: 437.8, image: "img/gamma_case_2.png" },
      { name: "–ö–µ–π—Å ¬´–ü—Ä–∏–∑–º–∞ 2¬ª", price: 123, prevPrice: 123, image: "img/prizma_2.png" },
      { name: "–ö–µ–π—Å ¬´–ó–º–µ–∏–Ω—ã–π —É–∫—É—Å¬ª", price: 39.86, prevPrice: 39.86, image: "img/zmeyniy_ukus.png" },
      { name: "–ì–∞–ª–µ—Ä–µ–π–Ω—ã–π –∫–µ–π—Å", price: 74.89, prevPrice: 74.89, image: "img/galereyniy.png" },
      { name: "–ö–µ–π—Å CS20", price: 114.42, prevPrice: 114.42, image: "img/cs20.png" },
      { name: "–ö–µ–π—Å –æ–ø–µ—Ä–∞—Ü–∏–∏ ¬´–î–∏–∫–æ–µ –ø–ª–∞–º—è¬ª", price: 362.02, prevPrice: 362.02, image: "img/dikoe_plamya.png" },
      { name: "–ö–µ–π—Å ¬´–§–∞–ª—å—à–∏–æ–Ω¬ª", price: 202.3, prevPrice: 202.3, image: "img/falshion.png" },
      { name: "–û—Ä—É–∂–µ–π–Ω—ã–π –∫–µ–π—Å –æ–ø–µ—Ä–∞—Ü–∏–∏ ¬´–§–µ–Ω–∏–∫—Å¬ª", price: 528.05, prevPrice: 528.05, image: "img/feniks.png" },
      { name: "–ö–µ–π—Å ¬´–ü—Ä–∏–∑–º–∞¬ª", price: 125.55, prevPrice: 125.55, image: "img/prizma.png" },
      { name: "–ì–∞–º–º–∞ –∫–µ–π—Å", price: 450.25, prevPrice: 450.25, image: "img/gamma_case.png" },
      { name: "–ö–µ–π—Å ¬´–ì–æ—Ä–∏–∑–æ–Ω—Ç¬ª", price: 170.66, prevPrice: 170.66, image: "img/gorizont.png" },
      { name: "–•—Ä–æ–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ä—É–∂–µ–π–Ω—ã–π –∫–µ–π—Å", price: 533.25, prevPrice: 533.25, image: "img/chrome_weapon_case.png" },
      { name: "–û—Ö–æ—Ç–Ω–∏—á–∏–π –æ—Ä—É–∂–µ–π–Ω—ã–π –∫–µ–π—Å", price: 1140.34, prevPrice: 1140.34, image: "img/okhotnichiy.png" },
      { name: "–¢—ë–º–Ω—ã–π –∫–µ–π—Å", price: 175.77, prevPrice: 175.77, image: "img/temniy.png" },
      { name: "–ö–µ–π—Å –æ–ø–µ—Ä–∞—Ü–∏–∏ ¬´–ë—Ä–∞–≤–æ¬ª", price: 5082.71, prevPrice: 5082.71, image: "img/bravo.png" },
      { name: "–ö–µ–π—Å –æ–ø–µ—Ä–∞—Ü–∏–∏ ¬´–°–ª–æ–º–∞–Ω–Ω—ã–π –∫–ª—ã–∫¬ª", price: 874.42, prevPrice: 874.42, image: "img/slomanniy_klyk.png" },
      { name: "–û—Ä—É–∂–µ–π–Ω—ã–π –∫–µ–π—Å –æ–ø–µ—Ä–∞—Ü–∏–∏ ¬´–ê–≤–∞–Ω–≥–∞—Ä–¥¬ª", price: 431.57, prevPrice: 431.57, image: "img/avangard.png" },
      { name: "–ö–µ–π—Å –æ–ø–µ—Ä–∞—Ü–∏–∏ ¬´–ì–∏–¥—Ä–∞¬ª", price: 2374.17, prevPrice: 2374.17, image: "img/gidra.png" }
    ];

    // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∫–µ–π—Å–æ–≤ –ø–æ —Ü–µ–Ω–µ
    caseData.sort((a, b) => a.price - b.price);

    // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö —Ü–µ–Ω –∏–∑ localStorage
    const savedData = localStorage.getItem('caseData');
    if (savedData) {
      const parsedData = JSON.parse(savedData);
      caseData.forEach(c => {
        const savedCase = parsedData.find(s => s.name === c.name);
        if (savedCase) {
          c.price = savedCase.price;
          c.prevPrice = savedCase.prevPrice;
        }
      });
      caseData.sort((a, b) => a.price - b.price);
    }

    // –ó–∞–≥—Ä—É–∑–∫–∞ —Ü–µ–Ω –∏–∑ Google Sheets —á–µ—Ä–µ–∑ Apps Script
    async function loadPrices() {
      try {
        const response = await fetch('YOUR_APPS_SCRIPT_URL?method=read');
        const data = await response.json();
        if (data.success && data.values) {
          data.values.forEach(row => {
            const [name, , price] = row;
            const caseItem = caseData.find(c => c.name === name);
            if (caseItem) {
              caseItem.price = parseFloat(price) || caseItem.price;
              caseItem.prevPrice = caseItem.prevPrice || caseItem.price;
            }
          });
          caseData.sort((a, b) => a.price - b.price);
          localStorage.setItem('caseData', JSON.stringify(caseData));
        }
      } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ü–µ–Ω:', error);
      }
      renderCases();
    }

    // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –∫–µ–π—Å—ã
    const casesContainer = document.getElementById('cases');
    function renderCases() {
      casesContainer.innerHTML = '';
      caseData.forEach(c => {
        const caseElement = document.createElement('div');
        caseElement.className = 'case';
        const arrow = c.price > c.prevPrice ? 'img/green.png' : c.price < c.prevPrice ? 'img/red.png' : '';
        caseElement.innerHTML = `
          <img src="${c.image}" alt="${c.name}">
          <div class="case-info">
            <h3>${c.name}</h3>
            <p>${c.price.toFixed(2)} —Ä—É–±.</p>
          </div>
          ${arrow ? `<img src="${arrow}" class="price-change" alt="Price change">` : ''}
        `;
        casesContainer.appendChild(caseElement);
      });
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω
    function checkAndUpdatePrices() {
      const lastUpdate = localStorage.getItem('lastPriceUpdate');
      const now = Date.now();
      const oneDay = 24 * 60 * 60 * 1000; // 24 —á–∞—Å–∞ –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö
      if (!lastUpdate || now - parseInt(lastUpdate) > oneDay) {
        updatePrices();
        localStorage.setItem('lastPriceUpdate', now.toString());
      }
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω —á–µ—Ä–µ–∑ Apps Script
    async function updatePrices() {
      try {
        const response = await fetch('YOUR_APPS_SCRIPT_URL?method=updatePrices');
        const data = await response.json();
        if (data.success && data.values) {
          data.values.forEach(row => {
            const [name, , price] = row;
            const caseItem = caseData.find(c => c.name === name);
            if (caseItem) {
              caseItem.prevPrice = caseItem.price;
              caseItem.price = parseFloat(price) || caseItem.price;
              caseItem.price = Math.max(0, Number(caseItem.price.toFixed(2)));
            }
          });
          caseData.sort((a, b) => a.price - b.price);
          localStorage.setItem('caseData', JSON.stringify(caseData));
          renderCases();
        }
      } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ü–µ–Ω:', error);
      }
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    loadPrices();
    checkAndUpdatePrices();

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ü–µ–Ω –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    window.addEventListener('load', checkAndUpdatePrices);
  </script>
</body>
</html>